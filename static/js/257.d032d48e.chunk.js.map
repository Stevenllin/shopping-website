{"version":3,"file":"static/js/257.d032d48e.chunk.js","mappings":"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","sources":["app/common/components/Field/ArticleDisplayField/index.ts","app/common/components/Field/ArticleDisplayField/ArticleDisplayField.tsx","app/common/components/CompoundComponent/RadioGroup/RadioGroup.tsx","app/common/components/Field/RadioButtonField/RadioButtonField.tsx","app/common/components/CompoundComponent/RadioGroup/index.ts","app/common/components/Field/AgreementField/index.ts","app/common/components/Field/AgreementField/AgreementField.tsx","app/features/Pay/Clause/Clause.tsx","app/store/features/pay/actions.ts"],"sourcesContent":["import ArticleDisplayField from './ArticleDisplayField';\nexport default ArticleDisplayField;\n","import React, { useRef } from 'react';\nimport { useField } from 'formik';\nimport { ArticleDisplayFieldProps } from './types';\n\nconst ArticleDisplayField: React.FC<ArticleDisplayFieldProps> = (props) => {\n  const contentRef = useRef<HTMLDivElement>(null)\n  const [field,, helpers] = useField(props.name);\n\n  /** \n   * @description 檢查滾動至文字內容底部\n   */\n  const handleCheckScrollToBottom = () => {\n    if (!contentRef.current) return\n    /** 內容框的高度 */\n    const contentHeight = contentRef.current.clientHeight;\n    /** 內容的高度 */\n    const scrollHeight = contentRef.current.scrollHeight\n    /** 與最初位置的高度距離 */\n    const scrollTop = Math.ceil(contentRef.current.scrollTop)\n    /** 若與最初位置高度 >= (內容的高度-內容框的高度) 且 field 尚未設定值 */\n    if ((scrollTop >= scrollHeight - contentHeight) && !field.value) helpers.setValue(true)\n  }\n\n  return (\n    <section id=\"article-display-field\">\n      <div className=\"box read-box\">\n        <div className=\"head\">\n          <p>{props.title.toUpperCase()}</p>\n          {props.scrollbar && (\n            <p className=\"notes\">Please scroll to the end of the article.</p>\n          )}\n        </div>\n        <div dangerouslySetInnerHTML={props.dangerouslySetInnerHTML} className=\"body\" ref={contentRef} onScroll={handleCheckScrollToBottom}>\n          {props.children}\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default ArticleDisplayField;\n","import React from 'react';\nimport { useField } from 'formik';\nimport RadioButtonField from '../../Field/RadioButtonField';\nimport { RadioGroupProps, RadioGroupFieldChildComponents } from './types';\n\nconst RadioGroup: React.FC<RadioGroupProps> & RadioGroupFieldChildComponents = (props) => {\n  /** 此 name 來自於 radio */\n  const [field, meta] = useField(props.name)\n  \n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (props.onChange) {\n      props.onChange(event)\n    }\n    field.onChange(event)\n  }\n\n  return (\n    <div className=\"radio-group-container\">\n      <div className=\"radio-name\">{props.label}</div>\n      <div className=\"d-flex justify-content-center\">\n        {React.Children.map(\n          props.children,\n          (child, index) => React.isValidElement(child) ? React.cloneElement<any>(child, { index, field: field, name: props.name, disabled: props.disabled,  onChange: handleChange }) : child\n        )}\n      </div>\n      {\n        meta.error && meta.touched && (\n          <div>{meta.error}</div>\n        )\n      }\n    </div>\n  )\n}\n\nRadioGroup.RadioButtonField = RadioButtonField;\n\nexport default RadioGroup;\n","import React, { useRef } from 'react';\nimport { RadioButtonFieldProps } from './types';\n\nconst RadioButtonField: React.FC<RadioButtonFieldProps> = ({ field, index, id, onClick, ...props }) => {\n  const inputElemIdRef = useRef<string>(field ? `${id || field.name.split('.').join('-')}-${index}` : String(index));\n  return (\n    <div className=\"field-radio\">\n      <input\n        type=\"radio\"\n        className=\"form-check-input\"\n        {...field}\n        id={inputElemIdRef.current}\n        name={props.name}\n        value={props.value}\n        disabled={props.disabled}\n        onClick={onClick}\n        onChange={props.onChange}\n      />\n      <label\n        htmlFor={inputElemIdRef.current}\n      >\n        {props.children}\n      </label>\n    </div>\n  )\n}\n\nexport default RadioButtonField;\n","import RadioGroup from './RadioGroup';\nexport default RadioGroup;\n","import AgreementField from './AgreementField';\nexport default AgreementField;\n","import React from 'react';\nimport { useField } from 'formik';\nimport RadioGroup from '../../CompoundComponent/RadioGroup';\nimport moment from 'moment';\nimport { AgreementFieldProps } from './types';\n\nconst AgreementField: React.FC<AgreementFieldProps> = (props) => {\n  /** 此 name 來自於 regTermAgreeTime */\n  const [,, helpers] = useField(props.name)\n\n  /** \n   * @description 按下同意 radio button\n   */\n  const handleAgreeChange = (event: any) => {\n    helpers.setValue(moment().format('YYYY-MM-DD HH:mm:ss.SSS'))\n    if (props.onClick) props.onClick(event)\n  }\n  \n  /** \n   * @description 按下不同意 radio button\n   */\n  const handleDisagreeChange = () => {\n    helpers.setValue('')\n  }\n\n  return (\n    <section id=\"agreement-field\">\n      {/** props 會包含傳進來的 name，因此，需補上 name 在此 */}\n      <RadioGroup {...props} name=\"radio\" label=\"\" onClick={props.onClick}>\n        <RadioGroup.RadioButtonField value=\"1\" onClick={handleAgreeChange}>\n          <div className=\"m-2\">{props.agreeText}</div>\n        </RadioGroup.RadioButtonField>\n        <RadioGroup.RadioButtonField value=\"0\" onClick={handleDisagreeChange}>\n          <div className=\"m-2\">{props.disagreeText}</div>\n        </RadioGroup.RadioButtonField>\n      </RadioGroup>\n    </section>\n  )\n}\n\nexport default AgreementField;","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport FormikContainer from '../../../common/components/CompoundComponent/Form';\nimport ArticleDisplayField from '../../../common/components/Field/ArticleDisplayField';\nimport AgreementField from '../../../common/components/Field/AgreementField';\nimport { FormValues } from './types';\nimport { resetPayAction } from '../../../store/features/pay/actions';\nimport { executeResetCartAction } from '../../../store/features/cart/actions';\nimport { BsArrowRight } from 'react-icons/bs';\nimport { routerHistory } from '../../../core/router/service';\nimport { ROUTES } from '../../../core/router/paths';\n\nconst Clause: React.FC = () => {\n  const reduxDispatch = useDispatch();\n  /** 初始表單值 */\n  const initialFormValues: FormValues = {\n    clause: false,\n    regTermAgreeTime: '',\n    radio: ''\n  }\n\n  const formik = useFormik<FormValues>({\n    initialValues: {\n      ...initialFormValues\n    },\n    validationSchema: Yup.object().shape({\n      clause: Yup.boolean().oneOf([true]),\n      regTermAgreeTime: Yup.string().required()\n    }),\n    onSubmit: (formValues) => {\n      if (formValues.clause && formValues.regTermAgreeTime && formValues.radio === '1') {\n        /** 清空購物車 */\n        reduxDispatch(executeResetCartAction())\n        /** 導回至首頁 */\n        routerHistory.push(ROUTES.HOME)\n      }\n    }\n  })\n\n  /** \n   * @description 重新導回上一頁\n   */\n  const handleRedirectToConfirmInfo = () => {\n    routerHistory.replace(ROUTES.PAY_CONFIRMINFO)\n    reduxDispatch(resetPayAction())\n  }\n\n  /** \n   * @desciption 重置\n   */\n  useEffect(() => {\n    return () => {\n      /** 清除結帳流程 */\n      reduxDispatch(resetPayAction())\n    }\n  }, [reduxDispatch])\n\n  return (\n    <div id=\"clause\">\n      <div className=\"context content-section\">\n        <FormikContainer formik={formik}>\n          <div className=\"wrapper\">\n            <ArticleDisplayField name=\"clause\" title=\"terms of purchase\" scrollbar>\n              <div className=\"article-content\">\n                <p>Lorem ipsum dolor sit amet, mea prompta tractatos ea, enim clita an est. In est timeam intellegam, error consequuntur ius no. Prima placerat quo et, te usu dicat affert soluta, his choro graeco intellegam no. Id labore accusata persecuti est, ea eam quaeque recteque torquatos. Causae electram eloquentiam vel id, te percipit expetenda periculis nec. Ius natum moderatius intellegebat no, mel no utinam graeci eloquentiam. Mea commodo admodum detraxit ut.</p>\n                <p>Et nec mentitum probatus, cum id doctus cotidieque. Ius no latine antiopam, labore fierent sea an, sit ad sapientem dignissim. Assum ancillae referrentur ei sit. Vel primis disputationi an, ubique cotidieque an vix. Te eos alia causae, eum ea deseruisse conclusionemque. Ex mei prima detracto voluptua, nec nostro verear albucius in.</p>\n                <p>Delenit repudiandae at vix. In est tamquam temporibus. Id amet salutandi necessitatibus has. Saepe concludaturque in mei, nam in pertinacia eloquentiam, magna posse partem duo ut. Enim scaevola perpetua at usu.</p>\n                <p>An vix doming copiosae ullamcorper, adhuc animal sed cu, in volumus singulis qui. Ei per iuvaret moderatius conclusionemque, agam feugait noluisse eum an. Eum cu vide vivendo, ad quis pericula vis. Ius suas ignota invidunt eu. Qui tota fabulas mediocrem ut, ex omittantur reformidans vix.</p>\n                <p>At noster recusabo mei, nam ea nibh audiam detracto. Vix autem denique appellantur cu, omnium laoreet inermis est no, zril democritum scribentur an nec. Sea ferri mazim an, mei eu torquatos deseruisse. Aperiam sanctus perfecto usu in, qui at scribentur dissentiunt, ei qui oratio partem.</p>\n              </div>\n            </ArticleDisplayField>\n            <AgreementField\n              name=\"regTermAgreeTime\"\n              agreeText=\"Agree\"\n              disagreeText=\"Disagree\"\n              onClick={() => formik.validateForm()}\n              disabled={!formik.values.clause}\n            />\n          </div>\n          <div className=\"d-flex justify-content-center mt-5\">\n            <button type=\"button\" className=\"button-minor m-2\" onClick={handleRedirectToConfirmInfo}>Previous Page</button>\n            <button type=\"submit\" className=\"button-main m-2\">Confirm <span><BsArrowRight className=\"icons icons-white\" /></span></button>\n          </div>\n        </FormikContainer>\n      </div>\n      \n    </div>\n  )\n}\n\nexport default Clause;\n","import { ProcessStepCodesEnum } from '../../../features/Pay/types';\nimport { EXECUTE__SET_ACCESSIBLE_STEP, EXECUTE__SET_CLAUSE, EXECUTE__RESET_PAY } from './types';\n\n/**\n * @description 設置可訪問步驟 (Action)\n * @param step 當前步驟\n*/\nexport const setAccessibleStepAction = (step: ProcessStepCodesEnum) => ({\n  type: EXECUTE__SET_ACCESSIBLE_STEP,\n  payload: {\n    step\n  }\n})\n\n/** \n * @description 設置同意條款 (Action)\n */\nexport const setClauseAction = (clause: boolean) => ({\n  type: typeof EXECUTE__SET_CLAUSE,\n  payload: {\n    clause\n  }\n})\n\n/** \n * @description 重置資料緩存\n */\nexport const resetPayAction = () => ({\n  type: typeof EXECUTE__RESET_PAY\n})"],"names":["props","contentRef","useRef","_useField","useField","name","_useField2","_slicedToArray","field","helpers","_jsx","id","children","_jsxs","className","title","toUpperCase","scrollbar","dangerouslySetInnerHTML","ref","onScroll","current","contentHeight","clientHeight","scrollHeight","Math","ceil","scrollTop","value","setValue","RadioGroup","meta","handleChange","event","onChange","label","React","map","child","index","disabled","error","touched","RadioButtonField","_ref","onClick","_objectWithoutProperties","_excluded","inputElemIdRef","concat","split","join","String","_objectSpread","type","htmlFor","moment","format","agreeText","disagreeText","reduxDispatch","useDispatch","formik","useFormik","initialValues","clause","regTermAgreeTime","radio","validationSchema","Yup","shape","oneOf","required","onSubmit","formValues","executeResetCartAction","routerHistory","push","ROUTES","HOME","useEffect","resetPayAction","FormikContainer","ArticleDisplayField","AgreementField","validateForm","values","replace","PAY_CONFIRMINFO","BsArrowRight","setAccessibleStepAction","step","EXECUTE__SET_ACCESSIBLE_STEP","payload","EXECUTE__RESET_PAY"],"sourceRoot":""}