{"version":3,"file":"static/js/646.65bb618d.chunk.js","mappings":"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","sources":["app/features/Pay/ConfirmInfo/ConfirmInfo.tsx","app/store/features/pay/actions.ts"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport apiService from '../../../api/services/apiService';\nimport { GetProductsResp } from '../../../api/models/get/getProducts';\nimport { RootState } from '../../../store/types';\nimport { AiFillMinusCircle } from 'react-icons/ai';\nimport { IoIosAddCircle } from 'react-icons/io';\nimport { setAccessibleStepAction } from '../../../store/features/pay/actions';\nimport { ProductDetails } from './types';\nimport { ProcessRouteMatchesStep } from '../types'\nimport commonService from '../../../core/services/commonService';\nimport { ROUTES } from '../../../core/router/paths';\n\nconst ConfirmInfo: React.FC = () => {\n  const routerHistory = useHistory()\n  const reduxDispatch = useDispatch();\n  /** 會員資訊 */\n  const member = useSelector((state: RootState) => state.common.member);\n  /** 購物車資訊 */\n  const carts = useSelector((state: RootState) => state.features.cart);\n  /** 所有商品的 State */\n  const [allProducts, setAllProducts] = useState<GetProductsResp[]>([]);\n  /** 購物車商品的細節 */\n  const [cartProducts, setCartProducts] = useState<ProductDetails[]>([]);\n\n  /** \n   * @description 取得所有商品的資訊\n   */\n  useEffect(() => {\n    (async () => {\n      const response = await apiService.getProducts()\n      setAllProducts(response);\n    })()\n  }, [])\n\n  /** \n   * @description 匹配購物車商品資訊\n   */\n  useEffect(() => {\n    const result: ProductDetails[] = carts.products.map(item => {\n      return { quantity: item.quantity, detail: allProducts.find(product => product.id === item.productId) ?? null }\n    })\n    setCartProducts(result)\n  },[carts, allProducts])\n\n  /**\n   * 計算總價格\n   */\n  const totalPrice = useMemo(() => {\n    let sum = 0\n    cartProducts.forEach(item => {\n      if (item.detail) sum = sum + item.quantity * item.detail?.price\n    })\n    return sum\n  }, [cartProducts])\n\n  /** \n   * @description 前往同意條款\n   */\n  const handleGoToClause = () => {\n    reduxDispatch(setAccessibleStepAction(ProcessRouteMatchesStep[ROUTES.PAY_CLAUSE]))\n    routerHistory.push(ROUTES.PAY_CLAUSE)\n  }\n\n  return (\n    <div id=\"confirm-info\">\n      <div className=\"context content-section\">\n        {/** 個人資訊 */}\n        <h3 className=\"text-center section-title\">CUSTOMER'S INFORMATION</h3>\n        <section id=\"customer-info\">\n          <div className=\"row mb-3\">\n            <div className=\"col-3\">\n              <p className=\"info-label\">Firstname:</p>\n            </div>\n            <div className=\"col-3\">\n              <p>{member?.name.firstname}</p>\n            </div>\n            <div className=\"col-3\">\n              <p className=\"info-label\">Lastname:</p>\n            </div>\n            <div className=\"col-3\">\n              <p>{member?.name.lastname}</p>\n            </div>\n          </div>\n          <div className=\"row mb-3\">\n            <div className=\"col-3\">\n              <p className=\"info-label\">Phone:</p>\n            </div>\n            <div className=\"col-3\">\n              <p>{member?.phone}</p>\n            </div>\n            <div className=\"col-3\">\n              <p className=\"info-label\">Email:</p>\n            </div>\n            <div className=\"col-3\">\n              <p>{member?.email}</p>\n            </div>\n          </div>\n          <div className=\"row mb-3\">\n            <div className=\"col-3\">\n              <p className=\"info-label m-0\">Address:</p>\n            </div>\n            <div className=\"col-9\">\n              <p className=\"m-0\">{member?.address.zipcode} {member?.address.city} {member?.address.street}</p>\n            </div>\n          </div>\n        </section>\n        {/** 購物車內資訊 */}\n        <h3 className=\"text-center section-title\">CART'S INFORMATION</h3>\n        <section id=\"cart-info\">\n          {\n            cartProducts.length > 0 && cartProducts.map((item, index) => (\n              <div className=\"row mb-5\" key={index}>\n                <div className=\"col-6 d-flex justify-content-center\">\n                  {/** image */}\n                  <img src={item.detail?.image} alt={item.detail?.title} height={300} />\n                </div>\n                <div className=\"col-6 p-5 d-flex flex-column justify-content-around\">\n                  {/** 商品名稱 */}\n                  <h4>{item.detail?.title}</h4>\n                  {/** 數量 */}\n                  <div className=\"d-flex align-items-center\">\n                    <button type=\"button\" className=\"me-4\">\n                      <AiFillMinusCircle className=\"icons-md icons-grey\" onClick={() => commonService.handleRemoveProductFromCart(item.detail)} />\n                    </button>\n                    <p className=\"m-0\">{item.quantity}</p>\n                    <button type=\"button\" className=\"ms-4\" onClick={() => commonService.handleAddProductToCart(item.detail)}>\n                      <IoIosAddCircle className=\"icons-md icons-grey\" />\n                    </button>\n                  </div>\n                  {/** 價格 */}\n                  <p>$ {item.detail?.price}</p>\n                </div>\n              </div>\n            ))\n          }\n        </section>\n        <div className=\"d-flex justify-content-end\">\n          <p>Total Price: {totalPrice}</p>\n        </div>\n        <div className=\"d-flex justify-content-center\">\n          <button type=\"button\" className=\"button-main\" onClick={handleGoToClause}>NEXT</button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ConfirmInfo;\n","import { ProcessStepCodesEnum } from '../../../features/Pay/types';\nimport { EXECUTE__SET_ACCESSIBLE_STEP, EXECUTE__SET_CLAUSE, EXECUTE__RESET_PAY } from './types';\n\n/**\n * @description 設置可訪問步驟 (Action)\n * @param step 當前步驟\n*/\nexport const setAccessibleStepAction = (step: ProcessStepCodesEnum) => ({\n  type: EXECUTE__SET_ACCESSIBLE_STEP,\n  payload: {\n    step\n  }\n})\n\n/** \n * @description 設置同意條款 (Action)\n */\nexport const setClauseAction = (clause: boolean) => ({\n  type: typeof EXECUTE__SET_CLAUSE,\n  payload: {\n    clause\n  }\n})\n\n/** \n * @description 重置資料緩存\n */\nexport const resetPayAction = () => ({\n  type: typeof EXECUTE__RESET_PAY\n})"],"names":["routerHistory","useHistory","reduxDispatch","useDispatch","member","useSelector","state","common","carts","features","cart","_useState","useState","_useState2","_slicedToArray","allProducts","setAllProducts","_useState3","_useState4","cartProducts","setCartProducts","useEffect","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","apiService","getProducts","sent","stop","result","products","map","item","_allProducts$find","quantity","detail","find","product","id","productId","totalPrice","useMemo","sum","forEach","_item$detail","price","_jsx","children","_jsxs","className","name","firstname","lastname","phone","email","address","zipcode","city","street","length","index","_item$detail2","_item$detail3","_item$detail4","_item$detail5","src","image","alt","title","height","type","AiFillMinusCircle","onClick","commonService","handleRemoveProductFromCart","handleAddProductToCart","IoIosAddCircle","setAccessibleStepAction","ProcessRouteMatchesStep","ROUTES","PAY_CLAUSE","push","step","EXECUTE__SET_ACCESSIBLE_STEP","payload","resetPayAction","EXECUTE__RESET_PAY"],"sourceRoot":""}