{"version":3,"file":"static/js/106.7ec3faf8.chunk.js","mappings":"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","sources":["app/core/router/guards/usePayGuard.ts","app/features/Pay/PayRoutes.tsx","app/common/components/CompoundComponent/ProgressBar/ProgressBarContext.ts","app/common/components/CompoundComponent/ProgressBar/ProgressBar.tsx","app/common/components/CompoundComponent/ProgressBar/Item/Item.tsx","app/common/components/CompoundComponent/ProgressBar/index.ts","app/common/layouts/Features/Pay/ProcessContainer/index.ts","app/common/layouts/Features/Pay/ProcessContainer/ProcessContainer.tsx","app/features/Pay/Pay.tsx"],"sourcesContent":["import { useLocation, useHistory } from 'react-router';\nimport { useSelector } from 'react-redux';\nimport { ProcessRouteMatchesStep } from '../../../features/Pay/types';\nimport { RootState } from '../../../store/types';\nimport { ROUTES } from '../paths';\n\nconst usePayGuard = () => {\n  const routerLocation = useLocation()\n  const routerHistory = useHistory()\n  /** 結帳流程可允許 State */\n  const payState = useSelector((state: RootState) => state.features.pay.process);\n  /** 目前的 Step */\n  const currentStep = ProcessRouteMatchesStep[routerLocation.pathname]\n  /** 檢查目前所處的 Step 是否在可被訪問 */\n  const isAccessible = payState.includes(currentStep);\n  /** 若不被允許，重新倒回 Confirm Info 頁面 */\n  if (!isAccessible) routerHistory.replace(ROUTES.PAY_CONFIRMINFO);\n  return isAccessible;\n}\n\nexport default usePayGuard;\n","import React from 'react';\nimport { Switch, Redirect } from 'react-router-dom';\nimport { ROUTES } from '../../core/router/paths';\nimport usePayGuard from '../../core/router/guards/usePayGuard';\nimport RouterRoute from '../../common/components/Router/RouterRoute';\nimport LazySpinner from '../../common/components/Spinner/LazySpinner';\n\nconst PayRoutes: React.FC = () => {\n  return (\n    <React.Suspense fallback={<LazySpinner />}>\n      <Switch>\n        <RouterRoute\n          exact\n          path={ROUTES.PAY_CONFIRMINFO}\n          component={React.lazy(() => import('./ConfirmInfo/ConfirmInfo'))}\n          activate={[usePayGuard]}\n        />\n        <RouterRoute\n          exact\n          path={ROUTES.PAY_CLAUSE}\n          component={React.lazy(() => import('./Clause/Clause'))}\n          activate={[usePayGuard]}\n        />\n        <Redirect to={ROUTES.HOME} />\n      </Switch>\n    </React.Suspense>\n  )\n}\n\nexport default PayRoutes;\n","import React from 'react';\nimport { ProgressBarContextValues } from './types';\n\nconst ProgressBarContext = React.createContext<ProgressBarContextValues>({\n  currentStep: '1'\n})\n\nexport default ProgressBarContext;\n","import React from 'react';\nimport Item from './Item';\nimport ProgressBarContext from './ProgressBarContext';\nimport { ProgressBarProps, ProgressBarChildComponents } from './types';\n\nconst ProgressBar: React.FC<ProgressBarProps> & ProgressBarChildComponents = (props) => {\n  return (\n    <ProgressBarContext.Provider value={{ currentStep: props.currentStep }}>\n      <div className=\"progress-bar\">\n        {\n          React.Children.map(props.children, (child, index) => \n            React.isValidElement(child)\n              ? React.cloneElement<any>(child, { step: String(index + 1) })\n              : child\n        )}\n      </div>\n    </ProgressBarContext.Provider>\n  )\n}\n\nProgressBar.Item = Item;\n\nexport default ProgressBar;\n","import React, { useContext } from 'react';\nimport ProgressBarContext from '../ProgressBarContext';\nimport { FaCircleCheck } from 'react-icons/fa6';\nimport { ItemProps } from './types';\n\nconst Item: React.FC<ItemProps> = (props) => {\n  const progressBarContext = useContext(ProgressBarContext)\n  const stepSnippets = progressBarContext.currentStep ? progressBarContext.currentStep.split('-') : []\n  const currentStep = stepSnippets[0]\n  const currentSubStep = stepSnippets[1]\n  const isActive = currentStep === props.step\n  const subStepHalf = props.subSteps && props.subSteps.length > 0 ? props.subSteps.length / 2 : 0\n\n  /** \n   * @description 檢核子步驟相關配置\n   * 規則說明：「子步驟項目數量」需大於 0、「當前子步驟」需大於 0、「當前子步驟」必須小於等於「子步驟項目數量」\n   */\n  const validateSubStepConfig = () => {\n    return props.subSteps && props.subSteps.length > 0 && currentSubStep && +currentSubStep > 0 && +currentSubStep <= props.subSteps.length\n  }\n\n  return (\n    <div className=\"progress-item\">\n      <div className=\"d-flex align-items-center mb-4\">\n        <div className=\"line\" />\n        <div className=\"dot\">\n        {\n          isActive && (\n            <div className=\"checked\">\n              <FaCircleCheck className=\"icons-lg icons-minor-dark\" />\n            </div>\n          )\n        }\n        </div>\n        <div className=\"line\" />\n      </div>\n      <div className={\"text\" + (isActive ? \" active\" : \"\")}>\n        {props.children}\n        {\n          isActive && validateSubStepConfig() ? `(${currentSubStep}/${props.subSteps?.length})` : null\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default Item;\n","import ProgressBar from './ProgressBar';\nexport default ProgressBar;","import ProcessContainer from './ProcessContainer';\nexport default ProcessContainer;\n","import React from 'react';\nimport { ProcessContainerProps } from './types';\nimport ProgressBar from '../../../../components/CompoundComponent/ProgressBar';\n\nconst ProcessContainer: React.FC<ProcessContainerProps> = (props) => (\n  <div className=\"process\">\n    <div className=\"process-container\">\n      <h1 className=\"text-center mb-4\">{props.title}</h1>\n      {props.stepsBarVisible && props.step.length > 0 && (\n        <ProgressBar currentStep={props.currentStep}>\n          {props.step.map((step, index) =>\n            step.visible ? (\n              <ProgressBar.Item key={index}>\n                {step.title}\n              </ProgressBar.Item>\n            ) : null\n          )}\n        </ProgressBar>\n      )}\n      {props.children}\n    </div>\n  </div>\n)\n\nexport default ProcessContainer;\n","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport PayRoutes from './PayRoutes';\nimport ProcessContainer from '../../common/layouts/Features/Pay/ProcessContainer';\nimport { ProcessRouteMatchesStep, ProcessStepTextEnum } from './types';\n\nconst Pay: React.FC = () => {\n  const routerLocation = useLocation();\n  return (\n    <ProcessContainer\n      title=\"Pay\"\n      currentStep={ProcessRouteMatchesStep[routerLocation.pathname]}\n      stepsBarVisible\n      step={[\n        { title: ProcessStepTextEnum.ConfirmInfo, visible: true },\n        { title: ProcessStepTextEnum.Clause, visible: true }\n      ]}\n    >\n      <PayRoutes />\n    </ProcessContainer>\n  )\n}\n\nexport default Pay;\n"],"names":["routerLocation","useLocation","routerHistory","useHistory","payState","useSelector","state","features","pay","process","currentStep","ProcessRouteMatchesStep","pathname","isAccessible","includes","replace","ROUTES","PAY_CONFIRMINFO","_jsx","React","fallback","LazySpinner","children","_jsxs","Switch","RouterRoute","exact","path","component","activate","usePayGuard","PAY_CLAUSE","Redirect","to","HOME","ProgressBar","props","ProgressBarContext","Provider","value","className","map","child","index","step","String","Item","_props$subSteps","progressBarContext","useContext","stepSnippets","split","currentSubStep","isActive","subSteps","length","FaCircleCheck","concat","title","stepsBarVisible","visible","ProcessContainer","ProcessStepTextEnum","ConfirmInfo","Clause","PayRoutes"],"sourceRoot":""}